<div class="admin-panel">
  <style>
    .admin-dash-box {
      background-color: var(--admin-accent2);
      border: 2px dashed var(--admin-800);
      padding: 20px;
      margin-top: 20px;
      border-radius: 5px;
      flex: 1; /* responsive: allow boxes to flex instead of fixed width */
      margin: 0 1%;
      transition: transform 0.3s ease-in-out;
      color: var(--admin-900);
    }

    .admin-dash-box:hover {
      transform: scale(1.02);
      box-shadow: 0 6px 18px rgba(41,40,49,0.06);
    }

    .admin-dash-box-container {
      display: flex;
      flex-direction: row;
      gap: 20px;
      width: 95%;
    }

    /* align label (strong) and value so all values line up vertically */
    .admin-dash-box p {
      display: grid;
      grid-template-columns: 140px auto; /* adjust 140px to fit longest label */
      column-gap: 12px;
      align-items: center;
      margin: 0.5rem 0;
    }

    /* value badge */
    .admin-dash-box-info {
      display: inline-flex;
      justify-content: flex-end;
      min-width: 3.5rem; /* ensures numeric values line up */
      font-size: 16px;
      font-weight: 700;
      background-color: var(--main-700-dark, color-mix(in srgb, var(--main-700) 85%, var(--admin-900) 8%));
      color: var(--admin-accent1);
      padding: 2px 8px;
      border-radius: 4px;
      text-align: right;
    }

    /* responsive: let label use available space on small screens */
    @media (max-width: 560px) {
      .admin-dash-box p {
        grid-template-columns: 1fr auto;
      }
      .admin-dash-box {
        width: 100%;
      }
    }
  </style>

  <h1>Admin Dashboard</h1>

  <div style="margin-top:8px; margin-bottom:12px;">
    <%= link_to 'Ship Requests', admin_ship_requests_path, class: 'btn-admin' %>
    <%= link_to 'Ships', admin_ships_path, class: 'btn-admin btn-admin--muted', style: 'margin-left:8px' %>
  </div>

  <div class="admin-dash-box-container">
    <div class="admin-dash-box">
      <h2>Summary</h2>
      <p><strong>Users:</strong> <%= content_tag :span, @users_count, class: "admin-dash-box-info" %></p>
      <p><strong>Projects:</strong> <%= content_tag :span, @projects_count, class: "admin-dash-box-info" %></p>
      <p><strong>Ships:</strong> <%= content_tag :span, @ships_count, class: "admin-dash-box-info" %></p>
      <p><strong>Orders:</strong> <%= content_tag :span, @orders_count, class: "admin-dash-box-info" %></p>
    </div>

    <div class="admin-dash-box">
      <h2>Projects</h2>
      <p><strong>Projects:</strong> <%= content_tag :span, @projects_count, class: "admin-dash-box-info" %></p>
      <p><strong>Pending:</strong> <%= content_tag :span, @projects_pending_count, class: "admin-dash-box-info" %></p>
      <p><strong>Shipped:</strong> <%= content_tag :span, @ships_count, class: "admin-dash-box-info" %></p>
      <p><strong>Ship Requests:</strong> <%= content_tag :span, @ship_requests_pending_count, class: "admin-dash-box-info" %></p>
    </div>

    <div class="admin-dash-box">
      <h2>Orders</h2>
      <p><strong>Orders:</strong> <%= content_tag :span, @orders_count, class: "admin-dash-box-info" %></p>
      <p><strong>Pending:</strong> <%= content_tag :span, @orders_pending_count, class: "admin-dash-box-info" %></p>
      <p><strong>Denied:</strong> <%= content_tag :span, @orders_denied_count, class: "admin-dash-box-info" %></p>
      <p><strong>Fulfilled:</strong> <%= content_tag :span, @orders_fulfilled_count, class: "admin-dash-box-info" %></p>
    </div>
  </div>

  <div style="margin-top: 24px;">
    <h2>Recent Projects</h2>
    <table class="admin-table">
      <thead>
        <tr>
          <th>Project</th>
          <th>Status</th>
          <th>Credits/hr</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% Project.order(created_at: :desc).limit(20).each do |project| %>
          <tr>
            <td><%= project.name %></td>
            <td><%= project.computed_status %></td>
            <td><%= project.credits_per_hour %></td>
            <td>
              <% if project.ship_requests.where(status: 'pending').exists? %>
                <%= link_to 'View Request', admin_ship_request_path(project.ship_requests.where(status: 'pending').first), class: 'btn-admin btn-admin--muted' %>
              <% end %>
              <% if project.computed_shipped? %>
                <%= button_to 'Unship', unship_admin_project_path(project), method: :post, class: 'btn-admin btn-admin-warning' %>
              <% else %>
                <%= button_to 'Ship', ship_admin_project_path(project), method: :post, class: 'btn-admin btn-admin-success' %>
                <%= button_to 'Force Ship', force_ship_admin_project_path(project), method: :post, class: 'btn-admin btn-admin-danger' %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

    </div> <!-- admin-panel -->
